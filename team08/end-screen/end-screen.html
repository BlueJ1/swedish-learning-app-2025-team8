<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Say What? - Game Complete</title>
    <style>
        :root {
            --color-primary: #006AA7;
            --color-secondary: #E91E63;
            --color-success: #4CAF50;
            --color-error: #F44336;
            --color-background: #E3F2FD;
            --color-surface: #FFFFFF;
            --color-text-primary: #212121;
            --color-text-secondary: #757575;
            --spacing-small: 0.5rem;
            --spacing-medium: 1rem;
            --spacing-large: 2rem;
            --border-radius: 0.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--color-background);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: var(--color-text-primary);
        }

        .game-container {
            width: 50rem;
            height: 37.5rem;
            background-color: var(--color-surface);
            border-radius: var(--border-radius);
            box-shadow: 0 0.25rem 1rem rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            padding: var(--spacing-large);
            background-color: var(--color-primary);
            color: var(--color-surface);
            text-align: center;
        }

        .header__title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: var(--spacing-small);
        }

        .header__subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
        }

        .main-content {
            flex: 1;
            padding: var(--spacing-large);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-large);
        }

        .score-summary {
            display: flex;
            justify-content: center;
            gap: var(--spacing-large);
            padding: var(--spacing-large);
            background-color: var(--color-background);
            border-radius: var(--border-radius);
        }

        .score-summary__item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-small);
        }

        .score-summary__value {
            font-size: 3rem;
            font-weight: bold;
        }

        .score-summary__value--correct {
            color: var(--color-success);
        }

        .score-summary__value--incorrect {
            color: var(--color-error);
        }

        .score-summary__value--percentage {
            color: var(--color-primary);
        }

        .score-summary__label {
            font-size: 1rem;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05rem;
        }

        .words-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-medium);
        }

        .words-section__title {
            font-size: 1.2rem;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-small);
        }

        .words-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-medium);
            max-height: 15rem;
            overflow-y: auto;
            padding: var(--spacing-small);
        }

        .word-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-small);
            padding: var(--spacing-small) var(--spacing-medium);
            background-color: var(--color-background);
            border-radius: calc(var(--border-radius) / 2);
            font-size: 1rem;
        }

        .word-item__icon {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--color-surface);
        }

        .word-item__icon--correct {
            background-color: var(--color-success);
        }

        .word-item__icon--incorrect {
            background-color: var(--color-error);
        }

        .word-item__text {
            flex: 1;
        }

        .footer {
            padding: var(--spacing-large);
            display: flex;
            justify-content: center;
            gap: var(--spacing-medium);
            background-color: var(--color-background);
        }

        .btn {
            padding: var(--spacing-medium) var(--spacing-large);
            border: none;
            border-radius: calc(var(--border-radius) / 2);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-small);
        }

        .btn:hover {
            transform: translateY(-0.125rem);
            box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn--primary {
            background-color: var(--color-primary);
            color: var(--color-surface);
        }

        .btn--secondary {
            background-color: var(--color-surface);
            color: var(--color-primary);
            border: 0.125rem solid var(--color-primary);
        }

        .settings-btn {
            position: absolute;
            top: var(--spacing-medium);
            right: var(--spacing-medium);
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            border: 0.125rem solid var(--color-surface);
            color: var(--color-surface);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .settings-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* Scrollbar styling */
        .words-grid::-webkit-scrollbar {
            width: 0.5rem;
        }

        .words-grid::-webkit-scrollbar-track {
            background: var(--color-background);
            border-radius: var(--border-radius);
        }

        .words-grid::-webkit-scrollbar-thumb {
            background: var(--color-primary);
            border-radius: var(--border-radius);
            opacity: 0.7;
        }

        .words-grid::-webkit-scrollbar-thumb:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
<div class="game-container">
    <header class="header">
        <button class="settings-btn" aria-label="Settings">
            ⚙️
        </button>
        <h1 class="header__title">Bra jobbat!</h1>
        <p class="header__subtitle">Great job!</p>
    </header>

    <main class="main-content">
        <section class="score-summary" aria-label="Score Summary">
            <div class="score-summary__item">
                <span class="score-summary__value score-summary__value--correct" id="correctCount">8</span>
                <span class="score-summary__label">Correct</span>
            </div>
            <div class="score-summary__item">
                <span class="score-summary__value score-summary__value--percentage" id="percentageScore">80%</span>
                <span class="score-summary__label">Score</span>
            </div>
            <div class="score-summary__item">
                <span class="score-summary__value score-summary__value--incorrect" id="incorrectCount">2</span>
                <span class="score-summary__label">Incorrect</span>
            </div>
        </section>

        <section class="words-section" aria-label="Word Results">
            <h2 class="words-section__title">Your Answers:</h2>
            <div class="words-grid" id="wordsGrid">
                <!-- Example words - these would be populated dynamically -->
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Ost (Cheese)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Sallad (Lettuce)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--incorrect">✗</span>
                    <span class="word-item__text">Gurka (Cucumber)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Skjorta (Shirt)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Stol (Chair)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Bord (Table)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--incorrect">✗</span>
                    <span class="word-item__text">Soffa (Sofa)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Byxor (Pants)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Äpple (Apple)</span>
                </div>
                <div class="word-item">
                    <span class="word-item__icon word-item__icon--correct">✓</span>
                    <span class="word-item__text">Mjölk (Milk)</span>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <button class="btn btn--secondary" id="reviewBtn">
            📊 Detailed Review
        </button>
        <button class="btn btn--primary" id="playAgainBtn">
            🎮 Play Again
        </button>
    </footer>
</div>

<script type="module">
    // Initialize the end screen with game data
    class EndScreen {
        constructor() {
            this.initializeEventListeners();
            this.loadGameResults();
        }

        initializeEventListeners() {
            const playAgainBtn = document.getElementById('playAgainBtn');
            const reviewBtn = document.getElementById('reviewBtn');
            const settingsBtn = document.querySelector('.settings-btn');

            playAgainBtn?.addEventListener('click', () => {
                this.handlePlayAgain();
            });

            reviewBtn?.addEventListener('click', () => {
                this.handleDetailedReview();
            });

            settingsBtn?.addEventListener('click', () => {
                this.handleSettings();
            });
        }

        loadGameResults() {
            // This would normally load from the store/backend
            // For now, using example data
            const gameData = this.getExampleGameData();
            this.displayResults(gameData);
        }

        getExampleGameData() {
            // Example data structure
            return {
                correct: 8,
                incorrect: 2,
                total: 10,
                words: [
                    { word: 'Ost', translation: 'Cheese', correct: true },
                    { word: 'Sallad', translation: 'Lettuce', correct: true },
                    { word: 'Gurka', translation: 'Cucumber', correct: false },
                    { word: 'Skjorta', translation: 'Shirt', correct: true },
                    { word: 'Stol', translation: 'Chair', correct: true },
                    { word: 'Bord', translation: 'Table', correct: true },
                    { word: 'Soffa', translation: 'Sofa', correct: false },
                    { word: 'Byxor', translation: 'Pants', correct: true },
                    { word: 'Äpple', translation: 'Apple', correct: true },
                    { word: 'Mjölk', translation: 'Milk', correct: true }
                ]
            };
        }

        displayResults(data) {
            // Update score display
            const correctCount = document.getElementById('correctCount');
            const incorrectCount = document.getElementById('incorrectCount');
            const percentageScore = document.getElementById('percentageScore');

            if (correctCount) correctCount.textContent = data.correct;
            if (incorrectCount) incorrectCount.textContent = data.incorrect;
            if (percentageScore) {
                const percentage = Math.round((data.correct / data.total) * 100);
                percentageScore.textContent = `${percentage}%`;
            }

            // Update words grid
            const wordsGrid = document.getElementById('wordsGrid');
            if (wordsGrid && data.words) {
                wordsGrid.innerHTML = data.words.map(item => `
            <div class="word-item">
              <span class="word-item__icon word-item__icon--${item.correct ? 'correct' : 'incorrect'}">
                ${item.correct ? '✓' : '✗'}
              </span>
              <span class="word-item__text">${item.word} (${item.translation})</span>
            </div>
          `).join('');
            }
        }

        handlePlayAgain() {
            // REQ-USER19: Return to start screen
            console.log('Redirecting to start screen...');
            // In production: window.location.href = '/';
        }

        handleDetailedReview() {
            // Optional: Show more detailed statistics
            console.log('Opening detailed review...');
        }

        handleSettings() {
            // REQ-USER5: Access settings
            console.log('Opening settings...');
        }
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
        new EndScreen();
    });
</script>
</body>
</html>
